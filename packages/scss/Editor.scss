@import '_mixin';
@import 'elements/DOMTools';

@mixin word-break {
	overflow-wrap: break-word;
	word-wrap: break-word;
}

@mixin firefox($item) {
	@supports not (-moz-appearance: none) {
		#{$item} > * {
			@include margin(rem, 0.75, $bottom: 0.75);
			@include height($line: 1.4);
			word-wrap: break-word;
		}
	}
}

@mixin tag-styles {
	code {
		@include padding(rem, $right: 0.2, $left: 0.2);
		background-color: #dee2e6;
	}

	table {
		@include all-margin(auto auto);
		border-collapse: collapse;
		box-sizing: border-box;

		[data-selected] {
			background-color: getVar(selected-color);
		}

		td,
		th {
			@include width($min: 2rem);
			box-sizing: border-box;
			white-space: nowrap;

			p {
				@include all-margin(0);
			}
		}
	}

	figure {
		@include position(relative);

		&[type='media'] {
			@include margin($left: 0, $right: 0);

			img,
			iframe,
			video,
			audio {
				@include position(relative);
				@include width($min: 1.25rem);
				@include height($min: 1.25rem);
			}

			video,
			audio {
				background-color: #000;
			}

			iframe {
				pointer-events: none;
			}

			&[style*='float: left'] {
				@include margin(rem, 0.5, 0.5, 0.5, 0);
			}

			&[style*='float: right'] {
				@include margin(rem, 0.5, 0, 0.5, 0.5);
			}

			&[style*='margin-left: 0'][style*='margin-right: auto'],
			&[style*='margin-left: 0px'][style*='margin-right: auto'] {
				img,
				iframe,
				video,
				audio,
				div[data-fake] {
					@include margin(null, $left: 0, $right: auto);
					display: block;
				}
			}

			&[style*='margin-left: auto'][style*='margin-right: auto'] {
				img,
				iframe,
				video,
				audio,
				div[data-fake] {
					@include all-margin(auto auto);
					display: block;
				}
			}

			&[style*='margin-left: auto'][style*='margin-right: 0'],
			&[style*='margin-left: auto'][style*='margin-right: 0px'] {
				img,
				iframe,
				video,
				audio,
				div[data-fake] {
					@include margin(null, $left: auto, $right: 0);
					display: block;
				}
			}
		}

		&[type='table'] {
			@include margin($left: 0, $right: 0);

			&[data-focused] {
				table {
					@include position(relative);
				}
			}
		}

		@include dom-tools;
	}

	[contenteditable='true'] {
		outline: none;
	}
}

##{getClassName(editor-body)} {
	@include firefox(body);
	@include all-margin(1rem);
	@include word-break;
	@include tag-styles;
}

.#{getClassName(inline)} {
	@include all-border(getVar(editor-border));
	background-color: getVar(editor-bg);

	##{getClassName(editor-body)} {
		@include firefox('##{getClassName(editor-body)}');
		@include all-margin(0.75rem);
		@include word-break;
		@include tag-styles;
		outline: none;
	}
}

.#{getClassName(media-size-navigation)} {
	@include position(absolute, 0, 0);
	@include font($color: getVar(media-size-navigation-font));
	@include all-padding(0.25rem);
	background-color: getVar(media-size-navigation-bg);
}
